"use strict";var d=Object.create;var a=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var C=(o,e)=>{for(var t in e)a(o,t,{get:e[t],enumerable:!0})},l=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of w(e))!x.call(o,s)&&s!==t&&a(o,s,{get:()=>e[s],enumerable:!(r=P(e,s))||r.enumerable});return o};var m=(o,e,t)=>(t=o!=null?d(O(o)):{},l(e||!o||!o.__esModule?a(t,"default",{value:o,enumerable:!0}):t,o)),S=o=>l(a({},"__esModule",{value:!0}),o);var b={};C(b,{default:()=>L});module.exports=S(b);var n=m(require("fs")),i=m(require("path"));var c=["Application Support","Google","Chrome"],h=["Application Support","Google","Chrome","Local State"],p=u();var f="Google Chrome has no bookmarks.";var E=require("@raycast/api"),g=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");return i.default.join(process.env.HOME,"Library")},_=(o,e)=>{let{profilePath:t}=(0,E.getPreferenceValues)(),r;if(t?r=i.default.join(t,o):r=i.default.join(g(),...c,e??p,o),!n.default.existsSync(r))throw new Error(`The profile path ${r} does not exist. Please check your Chrome profile location by visiting chrome://version -> Profile Path. Then update it in Extension Settings -> Profile Path.`);return r};var H=()=>i.default.join(g(),...h),R=o=>_("Bookmarks",o);function k(o){let e=[];return o.type==="folder"?o.children.forEach(t=>{e.push(...k(t))}):o.type==="url"&&o.url&&e.push({id:o.id,url:o.url,title:o.name,lastVisited:new Date(o.date_added)}),e}var F=o=>{let e=[];return Object.keys(o.roots).forEach(t=>{let r=o.roots[t],s=k(r);e.push(...s)}),e},y=async o=>{let e=R(o);if(!n.default.existsSync(e))throw new Error(f);let t=await n.default.promises.readFile(e,{encoding:"utf-8"});return F(JSON.parse(t))},u=()=>{try{let o=H(),e=n.default.readFileSync(o,"utf-8"),t=JSON.parse(e).profile.info_cache;return Object.keys(t)[0]}catch{return"Default"}};async function L(o){return o.query?await y():"Please enter a bookmark search query."}
